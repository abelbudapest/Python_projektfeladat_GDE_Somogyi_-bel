import matplotlib.pyplot as plt 
import csv 
import operator
import re
import numpy as np
from matplotlib.widgets import Slider
#plt.figure(figsize=(18,12))



fig, ax = plt.subplots()
plt.subplots_adjust(bottom=0.25)

try:
     #https://www.geeksforgeeks.org/visualize-data-from-csv-file-in-python/
     x = [] 
     y = [] 
    
     with open('Lakásállomány ezer lakosra_2020_telepules.csv','r', encoding='utf-8') as csvfile: 
         lines = csv.reader(csvfile, delimiter=';')

         #https://www.geeksforgeeks.org/how-to-sort-data-by-column-in-a-csv-file-in-python/

         lines = sorted(lines, key=operator.itemgetter(6))
         lines=lines[:-1]


         for li in lines:
            try:
                converted=float(li[6])
                del li[6]
                li[6]=converted
            except:
                 continue
         

         for l in lines:
              print(l[6]) # itt megvannak a float-jaim
         
         lines = sorted(lines, key=operator.itemgetter(6))
         
         for row in lines:

             try: 
                 
                    x.append(row[1])
                    y.append(row[6])
             except Exception as ea: print(ea); continue      
    
     plt.plot(x, y, color = 'b', linestyle = 'dashed', 
             marker = 'o',label = "Lakásállomány ezer lakosra_2020")
   
     plt.xticks(rotation = 25) 
     plt.xlabel('Település nevek') 
     plt.ylabel('Lakasok') 

     plt.title('Lakásállomány ezer lakosra 2020-ban', fontsize = 20) 

     plt.legend() 

except Exception as e: print(e)

plt.axis([0, 20, 0, 3500])

#https://stackoverflow.com/questions/31001713/plotting-the-data-with-scrollable-x-time-horizontal-axis-on-linux

axcolor = 'green'#'lightgoldenrodyellow'
axpos = plt.axes([0.2, 0.02, 0.65, 0.03], facecolor=axcolor)

spos = Slider(axpos, 'Pos', 1, 3130.0)

def update(val):
    pos = spos.val
    ax.axis([pos,pos+30,0,3600])
    fig.canvas.draw_idle()

spos.on_changed(update)

plt.show()